# JONQUILS Online Music Service

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–Ω–ª–∞–π–Ω-–º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π, ETL-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

JONQUILS –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º—É–∑—ã–∫–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, –≤–∫–ª—é—á–∞—é—â—É—é API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–æ–π, —Å–∏—Å—Ç–µ–º—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π, ETL-–ø–∞–π–ø–ª–∞–π–Ω—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Frontend     ‚îÇ    ‚îÇ    Backend      ‚îÇ    ‚îÇ   Analytics     ‚îÇ
‚îÇ   (React.js)    ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (FastAPI)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  (ClickHouse)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
         ‚îÇ              ‚îÇ   PostgreSQL    ‚îÇ              ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   (Primary DB)  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ   ETL System    ‚îÇ
                        ‚îÇ   (Airflow)     ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ                 ‚îÇ                 ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ    MinIO    ‚îÇ  ‚îÇ    Redis    ‚îÇ  ‚îÇElasticsearch‚îÇ
         ‚îÇ (Storage)   ‚îÇ  ‚îÇ  (Cache)    ‚îÇ  ‚îÇ  (Search)   ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —Å–ª–æ–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

**Frontend Layer**: React.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å TypeScript, –æ–±—Å–ª—É–∂–∏–≤–∞–µ–º–æ–µ Nginx –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º
**API Gateway Layer**: FastAPI —Å–µ—Ä–≤–µ—Ä —Å middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ CORS
**Business Logic Layer**: –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ç—Ä–µ–∫–∞–º–∏, –∞—Ä—Ç–∏—Å—Ç–∞–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
**Data Layer**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏
**ETL & Orchestration**: Apache Airflow –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Framework**: FastAPI 0.104+
- **Language**: Python 3.12
- **ORM**: SQLAlchemy (async)
- **Migrations**: Alembic
- **Authentication**: JWT Tokens
- **API Documentation**: OpenAPI/Swagger

### Frontend
- **Framework**: React.js 18+ with TypeScript
- **Routing**: React Router
- **HTTP Client**: Axios
- **Build Tool**: Create React App
- **Web Server**: Nginx

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

#### PostgreSQL (–û—Å–Ω–æ–≤–Ω–∞—è –ë–î)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–°—Ö–µ–º—ã**:
  - `public` - –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (users, tracks, albums, artists)
  - `etl` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ ETL –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - `staging` - –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
  - `data_warehouse` - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### ClickHouse (–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ë–î)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: High-performance analytics
- **–¢–∞–±–ª–∏—Ü—ã**:
  - `api_requests_log` - –ª–æ–≥–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
  - `track_analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π
  - `search_analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–∞
  - `user_analytics` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  - `artist_analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞—Ä—Ç–∏—Å—Ç–æ–≤

#### Redis (–ö–µ—à –∏ –æ—á–µ—Ä–µ–¥–∏)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
  - Session storage
  - API response caching
  - Airflow message broker

#### Elasticsearch (–ü–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- **–ò–Ω–¥–µ–∫—Å—ã**:
  - –¢—Ä–µ–∫–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
  - –ê—Ä—Ç–∏—Å—Ç—ã –∏ –∞–ª—å–±–æ–º—ã
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã

#### MinIO (–û–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
- **Bucket —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
  - `tracks` - –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã
  - `covers` - –æ–±–ª–æ–∂–∫–∏ –∞–ª—å–±–æ–º–æ–≤
  - `playlists` - —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
  - `temp` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

## ETL –°–∏—Å—Ç–µ–º–∞ (Apache Airflow)

### –û—Å–Ω–æ–≤–Ω—ã–µ DAG

#### 1. Music ETL Pipeline (music_etl_pipeline.py)
**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —á–∞—Å
**–ó–∞–¥–∞—á–∏**:
1. **Extract**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤ –∏–∑ S3
2. **Transform**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∞—É–¥–∏–æ
3. **Load**: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ PostgreSQL –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Elasticsearch
4. **Analytics**: –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –≤ ClickHouse

```
S3 (New Audio Files) 
    ‚Üì extract_new_tracks()
Staging Table 
    ‚Üì process_audio_metadata()
PostgreSQL (tracks, albums, artists)
    ‚Üì index_to_elasticsearch()
Elasticsearch (search indices)
    ‚Üì create_analytics_aggregates()
ClickHouse (analytics tables)
```

#### 2. System Monitoring (system_monitoring.py)
**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
**–ó–∞–¥–∞—á–∏**:
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª–µ—Ä—Ç–æ–≤

### ETL –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ –¥–µ—Ç–∞–ª—è—Ö

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Extract)
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ S3 bucket 'tracks' –Ω–∞ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ç–∞–±–ª–∏—Ü–µ–π etl.s3_file_registry
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤

#### –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Transform)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID3 —Ç–µ–≥–æ–≤ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç, –∞–ª—å–±–æ–º)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞ —á–µ—Ä–µ–∑ ML –º–æ–¥–µ–ª—å
- –†–∞—Å—á–µ—Ç –∞—É–¥–∏–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (tempo, energy, valence)
- –°–æ–∑–¥–∞–Ω–∏–µ thumbnail –æ–±–ª–æ–∂–µ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (Load)
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ PostgreSQL (tracks, albums, artists)
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Elasticsearch –¥–ª—è –ø–æ–∏—Å–∫–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π –≤ ClickHouse
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ Redis

## –°–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

#### AuthService
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å (user, artist, admin)

#### TrackService
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç—Ä–µ–∫–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- –°–≤—è–∑–∏ —Å –∞–ª—å–±–æ–º–∞–º–∏ –∏ –∞—Ä—Ç–∏—Å—Ç–∞–º–∏

#### ArtistService
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞—Ä—Ç–∏—Å—Ç–∞–º
- –°–≤—è–∑–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### AlbumService
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª—å–±–æ–º–∞–º–∏
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç—Ä–µ–∫–æ–≤
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–µ–ª–∏–∑–æ–≤

#### AnalyticsService
- –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ClickHouse

#### SearchService
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

#### S3Service
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è presigned URLs
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
users (id, username, email, role, is_active, created_at)
artists (id, user_id, name, bio, country, image_url)

-- –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
genres (id, name, description)
albums (id, artist_id, title, release_date, cover_image_url)
tracks (id, artist_id, album_id, genre_id, title, duration_ms, 
        file_path, popularity, tempo, energy, valence)

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
playlists (id, user_id, title, description, is_public)
playlist_tracks (playlist_id, track_id, position)
listening_history (id, user_id, track_id, played_at, 
                  play_duration_ms, completion_percentage)

-- ETL –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
etl.etl_jobs (id, job_name, status, start_time, end_time)
etl.s3_file_registry (id, file_path, bucket_name, status)
staging.track_uploads (id, original_filename, s3_path, metadata)
```

### –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã (ClickHouse)

```sql
-- API –∑–∞–ø—Ä–æ—Å—ã
api_requests_log (timestamp, user_id, method, endpoint, 
                 status_code, response_time_ms)

-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–∫–æ–≤
track_analytics (timestamp, track_id, user_id, action, 
                duration_played_ms, platform, device_type)

-- –ü–æ–∏—Å–∫–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
search_analytics (timestamp, user_id, query, results_count, 
                 clicked_result_id)

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
user_analytics (timestamp, user_id, action, session_duration_minutes, 
               tracks_played, searches_made)
```

## API –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
POST /api/v1/auth/register    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST /api/v1/auth/login       # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
GET  /api/v1/auth/me         # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /api/v1/auth/refresh    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞–º–∏
```
GET    /api/v1/tracks/              # –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤
POST   /api/v1/tracks/              # –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞
GET    /api/v1/tracks/{id}          # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞
PUT    /api/v1/tracks/{id}          # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞
DELETE /api/v1/tracks/{id}          # –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞
POST   /api/v1/tracks/upload        # –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ç–∏—Å—Ç–∞–º–∏
```
GET    /api/v1/artists/             # –°–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏—Å—Ç–æ–≤
POST   /api/v1/artists/             # –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–∏—Å—Ç–∞
GET    /api/v1/artists/{id}         # –ü—Ä–æ—Ñ–∏–ª—å –∞—Ä—Ç–∏—Å—Ç–∞
GET    /api/v1/artists/{id}/tracks  # –¢—Ä–µ–∫–∏ –∞—Ä—Ç–∏—Å—Ç–∞
GET    /api/v1/artists/{id}/albums  # –ê–ª—å–±–æ–º—ã –∞—Ä—Ç–∏—Å—Ç–∞
```

### –ü–æ–∏—Å–∫
```
GET /api/v1/search/tracks    # –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤
GET /api/v1/search/artists   # –ü–æ–∏—Å–∫ –∞—Ä—Ç–∏—Å—Ç–æ–≤
GET /api/v1/search/albums    # –ü–æ–∏—Å–∫ –∞–ª—å–±–æ–º–æ–≤
GET /api/v1/search/suggest   # –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```
GET /api/v1/analytics/user/{user_id}     # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
GET /api/v1/analytics/track/{track_id}   # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–∫–∞
GET /api/v1/analytics/platform           # –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
POST /api/v1/analytics/listen           # –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
```

## Middleware –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Analytics Middleware
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –≤ ClickHouse:
- –í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞
- –ú–µ—Ç–æ–¥ –∏ endpoint
- –°—Ç–∞—Ç—É—Å –∫–æ–¥
- User ID (–µ—Å–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)
- User Agent –∏ IP –∞–¥—Ä–µ—Å

### CORS Middleware
- –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ preflight –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è development/production

### Authentication Middleware
- JWT —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–æ–∫–µ–Ω–∞
- –†–æ–ª–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker Compose –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```yaml
services:
  # Application layer
  backend:        # FastAPI —Å–µ—Ä–≤–µ—Ä
  frontend:       # React + Nginx
  
  # Data layer
  postgres:       # –û—Å–Ω–æ–≤–Ω–∞—è –ë–î
  clickhouse:     # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
  redis:          # –ö–µ—à
  elasticsearch:  # –ü–æ–∏—Å–∫
  minio:          # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  
  # ETL layer
  airflow-webserver:  # Web UI –¥–ª—è Airflow
  airflow-scheduler:  # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
```

### –°–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```
Frontend:     localhost:3000
Backend API:  localhost:8000
Airflow UI:   localhost:8080
PostgreSQL:   localhost:5432
ClickHouse:   localhost:8123 (HTTP), localhost:9000 (Native)
Redis:        localhost:6379
Elasticsearch: localhost:9200
MinIO Console: localhost:9001
MinIO API:    localhost:9002
```

### Health Checks
–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç health check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- Backend: `GET /health`
- Frontend: `GET /health` (nginx)
- Databases: native health check –∫–æ–º–∞–Ω–¥—ã

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- CPU, Memory, Disk usage
- Network I/O
- Database connections
- API response times

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–∫–æ–≤
- –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –û—à–∏–±–∫–∏ API

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ JSON
- –£—Ä–æ–≤–Ω–∏: DEBUG, INFO, WARNING, ERROR
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä—É/–≤—Ä–µ–º–µ–Ω–∏
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `/app/logs`

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª—è—Ö
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ClickHouse —Ç–∞–±–ª–∏—Ü –ø–æ –¥–∞—Ç–µ
- Connection pooling –¥–ª—è PostgreSQL
- Read replicas –¥–ª—è —á–∏—Ç–∞—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redis –¥–ª—è —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- API response caching
- Static files caching –≤ nginx
- CDN –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ (–≤ production)

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- Async/await –≤ FastAPI
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ Airflow
- –°–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
- Refresh tokens –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
- –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞
- Rate limiting –Ω–∞ API endpoints

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- SQL injection protection (SQLAlchemy ORM)
- XSS protection —á–µ—Ä–µ–∑ Content Security Policy
- HTTPS –≤ production

### –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ backup –¥–∞–Ω–Ω—ã—Ö

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker 20.10+
- Docker Compose 2.0+
- Git
- 8GB RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- 20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres createdb music_service_db

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ë–î
```

### 5. –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head
```

### 6. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
python create_test_data.py
```

### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –†–∞–∑–≤—Ä–∞–±–æ—Ç–∫–∞
python -m app.main

# –ò–ª–∏ —á–µ—Ä–µ–∑ uvicorn
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## üèó API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/v1/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

### –¢—Ä–µ–∫–∏
- `GET /api/v1/tracks/` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤
- `POST /api/v1/tracks/` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç—Ä–µ–∫
- `POST /api/v1/tracks/upload-from-url/` - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç—Ä–µ–∫ –ø–æ URL
- `GET /api/v1/tracks/search/` - –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤
- `GET /api/v1/tracks/popular/` - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–∫–∏

### –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
- `GET /api/v1/artists/` - –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π  
- `POST /api/v1/artists/` - –°–æ–∑–¥–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

### –ê–ª—å–±–æ–º—ã
- `GET /api/v1/albums/` - –°–ø–∏—Å–æ–∫ –∞–ª—å–±–æ–º–æ–≤
- `POST /api/v1/albums/` - –°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º

## üõ° –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```env
DATABASE_URL=postgresql://postgres:password@localhost:5432/music_service_db
SECRET_KEY=your-super-secret-key
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password  
POSTGRES_DB=music_service_db
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
pytest

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
flake8 app/
black app/
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `logs/`
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ FastAPI –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ endpoints

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
2. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è  
3. –°–æ–∑–¥–∞–π—Ç–µ Pull Request
4. –ü–æ—Å–ª–µ —Ä–µ–≤—å—é –∫–æ–¥ –±—É–¥–µ—Ç —Å–ª–∏—Ç –≤ main

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.
    uvicorn app.main:app --reload
    ```
    –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000`.
    –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000/docs`.
    –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (ReDoc) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000/redoc`.

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (v1)

*   –¢—Ä–µ–∫–∏: `/api/v1/tracks/`
*   –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: `/api/v1/analytics/`
*   ... (–±—É–¥–µ—Ç –¥–æ–ø–æ–ª–Ω—è—Ç—å—Å—è) 